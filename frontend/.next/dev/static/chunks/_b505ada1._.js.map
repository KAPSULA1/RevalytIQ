{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/lib/auth.ts"],"sourcesContent":["import axios from \"axios\";\n\n// axios instance\nexport const api = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://127.0.0.1:8000\",\n  headers: { \"Content-Type\": \"application/json\" },\n});\n\n// üîë Login (JWT Token)\nexport async function login(username: string, password: string) {\n  const { data } = await api.post(\"/api/auth/token/\", { username, password });\n  return data as { access: string; refresh: string };\n}\n\n// üßæ Register (optional, for signup)\nexport async function register(username: string, email: string, password: string) {\n  const { data } = await api.post(\"/api/auth/register/\", {\n    username,\n    email,\n    password,\n  });\n  return data;\n}\n\n// üìä KPI & Orders Fetching for Dashboard\nexport async function fetchKPIs() {\n  const token = localStorage.getItem(\"access\");\n  const { data } = await api.get(\"/api/analytics/kpis/\", {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return data;\n}\n\nexport interface Order {\n  id: number;\n  customer: string;\n  amount: number | string;\n  status: string;\n  created_at: string;\n}\n\nexport async function fetchOrders() {\n  const token = localStorage.getItem(\"access\");\n  const { data } = await api.get(\"/api/analytics/orders/\", {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return data;\n}\n"],"names":["axios","api","create","baseURL","process","env","NEXT_PUBLIC_API_URL","headers","login","username","password","data","post","register","email","fetchKPIs","token","localStorage","getItem","get","Authorization","fetchOrders"],"mappings":";;;;;;;;;;;;AAIWI,OAAO,CAACC,GAAG,CAACC,mBAAmB;AAJ1C,OAAON,KAAK,MAAM,OAAO;;AAGlB,MAAMC,GAAG,GAAGD,sMAAK,CAACE,MAAM,CAAC;IAC9BC,OAAO,+DAAqC,uBAAuB;IACnEI,OAAO,EAAE;QAAE,cAAc,EAAE;IAAmB;AAChD,CAAC,CAAC;AAGK,eAAeC,KAAKA,CAACC,QAAgB,EAAEC,QAAgB,EAAE;IAC9D,MAAM,EAAEC,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,kBAAkB,EAAE;QAAEH,QAAQ;QAAEC;IAAS,CAAC,CAAC;IAC3E,OAAOC,IAAI;AACb;AAGO,eAAeE,QAAQA,CAACJ,QAAgB,EAAEK,KAAa,EAAEJ,QAAgB,EAAE;IAChF,MAAM,EAAEC,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,qBAAqB,EAAE;QACrDH,QAAQ;QACRK,KAAK;QACLJ;IACF,CAAC,CAAC;IACF,OAAOC,IAAI;AACb;AAGO,eAAeI,SAASA,CAAA,EAAG;IAChC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC5C,MAAM,EAAEP,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACkB,GAAG,CAAC,sBAAsB,EAAE;QACrDZ,OAAO,EAAE;YAAEa,aAAa,EAAE,CAAA,OAAA,EAAUJ,KAAK,EAAA;QAAG;IAC9C,CAAC,CAAC;IACF,OAAOL,IAAI;AACb;AAUO,eAAeU,WAAWA,CAAA,EAAG;IAClC,MAAML,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC5C,MAAM,EAAEP,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACkB,GAAG,CAAC,wBAAwB,EAAE;QACvDZ,OAAO,EAAE;YAAEa,aAAa,EAAE,CAAA,OAAA,EAAUJ,KAAK,EAAA;QAAG;IAC9C,CAAC,CAAC;IACF,OAAOL,IAAI;AACb","ignoreList":[],"debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { FormEvent, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { isAxiosError } from \"axios\";\nimport { login } from \"@/lib/auth\";\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n\n    if (!username.trim() || !password.trim()) {\n      setError(\"Please enter both username and password.\");\n      return;\n    }\n\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const data = await login(username.trim(), password.trim());\n\n      // ‚úÖ ·É®·Éî·Éò·Éú·Éê·ÉÆ·Éî ·É¢·Éù·Éô·Éî·Éú·Éî·Éë·Éò\n      localStorage.setItem(\"access\", data.access);\n      localStorage.setItem(\"refresh\", data.refresh);\n\n      // ‚úÖ ·Éí·Éê·Éì·Éê·Éì·Éò dashboard-·Éñ·Éî\n      router.push(\"/dashboard\");\n    } catch (err) {\n      if (isAxiosError(err)) {\n        if (err.response?.status === 401) {\n          setError(\"Invalid username or password.\");\n        } else {\n          setError(\"Login failed. Try again later.\");\n        }\n      } else {\n        setError(\"Unexpected error occurred.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\n      <form\n        onSubmit={handleSubmit}\n        className=\"bg-white shadow-lg rounded-2xl p-6 w-96 flex flex-col gap-4\"\n      >\n        <h2 className=\"text-2xl font-semibold text-center\">RevalytIQ Login</h2>\n\n        <input\n          type=\"text\"\n          placeholder=\"Username\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          className=\"border p-2 rounded-lg\"\n        />\n\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"border p-2 rounded-lg\"\n        />\n\n        {error && <p className=\"text-red-500 text-sm text-center\">{error}</p>}\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-70\"\n        >\n          {loading ? \"Signing in...\" : \"Sign In\"}\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":["useState","useRouter","isAxiosError","login","jsx","_jsx","jsxs","_jsxs","LoginPage","router","username","setUsername","password","setPassword","error","setError","loading","setLoading","handleSubmit","e","preventDefault","trim","data","localStorage","setItem","access","refresh","push","err","response","status","className","children","onSubmit","type","placeholder","value","onChange","target","disabled"],"mappings":"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","ignoreList":[],"debugId":null}}]
}