{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/lib/store.ts"],"sourcesContent":["import { create } from \"zustand\";\n\ntype AuthState = {\n  access: string | null;\n  refresh: string | null;\n  setTokens: (t: { access: string; refresh: string }) => void;\n  clear: () => void;\n};\n\nexport const useAuth = create<AuthState>((set) => ({\n  access: null,\n  refresh: null,\n  setTokens: ({ access, refresh }) => {\n    localStorage.setItem(\"access\", access);\n    localStorage.setItem(\"refresh\", refresh);\n    set({ access, refresh });\n  },\n  clear: () => {\n    localStorage.removeItem(\"access\");\n    localStorage.removeItem(\"refresh\");\n    set({ access: null, refresh: null });\n  }\n}));\n\nexport const hydrateAuthFromStorage = () => {\n  if (typeof window === \"undefined\") return;\n  const access = localStorage.getItem(\"access\");\n  const refresh = localStorage.getItem(\"refresh\");\n  if (access && refresh) useAuth.setState({ access, refresh });\n};\n"],"names":["create","useAuth","set","access","refresh","setTokens","localStorage","setItem","clear","removeItem","hydrateAuthFromStorage","window","getItem","setState"],"mappings":";;;;;;AAAA,SAASA,MAAM,QAAQ,SAAS;;AASzB,MAAMC,OAAO,OAAGD,mRAAM,GAAaE,GAAG,GAAA,CAAM;QACjDC,MAAM,EAAE,IAAI;QACZC,OAAO,EAAE,IAAI;QACbC,SAAS,EAAEA,CAAC,EAAEF,MAAM,EAAEC,OAAAA,EAAS,KAAK;YAClCE,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEJ,MAAM,CAAC;YACtCG,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEH,OAAO,CAAC;YACxCF,GAAG,CAAC;gBAAEC,MAAM;gBAAEC;YAAQ,CAAC,CAAC;QAC1B,CAAC;QACDI,KAAK,EAAEA,CAAA,KAAM;YACXF,YAAY,CAACG,UAAU,CAAC,QAAQ,CAAC;YACjCH,YAAY,CAACG,UAAU,CAAC,SAAS,CAAC;YAClCP,GAAG,CAAC;gBAAEC,MAAM,EAAE,IAAI;gBAAEC,OAAO,EAAE;YAAK,CAAC,CAAC;QACtC;IACF,CAAC,CAAC,CAAC;AAEI,MAAMM,sBAAsB,GAAGA,CAAA,KAAM;IAC1C,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;;IACnC,MAAMR,MAAM,GAAGG,YAAY,CAACM,OAAO,CAAC,QAAQ,CAAC;IAC7C,MAAMR,OAAO,GAAGE,YAAY,CAACM,OAAO,CAAC,SAAS,CAAC;IAC/C,IAAIT,MAAM,IAAIC,OAAO,EAAEH,OAAO,CAACY,QAAQ,CAAC;QAAEV,MAAM;QAAEC;IAAQ,CAAC,CAAC;AAC9D,CAAC","ignoreList":[],"debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/components/Navbar.tsx"],"sourcesContent":["\"use client\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../lib/store\";\nimport toast from \"react-hot-toast\";\n\nexport default function Navbar() {\n  const router = useRouter();\n  const clear = useAuth((s) => s.clear);\n\n  const onLogout = () => {\n    clear();\n    toast.success(\"Signed out\");\n    router.replace(\"/\");\n  };\n\n  return (\n    <header className=\"h-14 border-b bg-white flex items-center justify-between px-4\">\n      <div className=\"font-semibold\">RevalytIQ</div>\n      <button\n        onClick={onLogout}\n        className=\"text-sm px-3 py-1.5 rounded-lg bg-gray-100 hover:bg-gray-200\"\n      >\n        Logout\n      </button>\n    </header>\n  );\n}\n"],"names":["useRouter","useAuth","toast","jsx","_jsx","jsxs","_jsxs","Navbar","router","clear","s","onLogout","success","replace","className","children","onClick"],"mappings":";;;;AACA,SAASA,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,cAAc;AACtC,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;;AAHpC,YAAY;;;;;AAKG;;IACb,MAAME,MAAM;IACZ,MAAMC,KAAK;kCAAYC,CAAC,GAAKA,CAAC,CAACD,KAAK,CAAC;;IAErC,MAAME,QAAQ,GAAGA,CAAA,KAAM;QACrBF,KAAK,CAAC,CAAC;QACPP,oTAAK,CAACU,OAAO,CAAC,YAAY,CAAC;QAC3BJ,MAAM,CAACK,OAAO,CAAC,GAAG,CAAC;IACrB,CAAC;IAED,OAAA,WAAA,OACEP,+UAAA,EAAA,UAAA;QAAQQ,SAAS,EAAC,+DAA+D;QAAAC,QAAA,EAAA;YAAA,WAAA,GAC/EX,kVAAA,EAAA,OAAA;gBAAKU,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;YAAS,CAAK,CAAC;YAAA,WAAA,OAC9CX,8UAAA,EAAA,UAAA;gBACEY,OAAO,EAAEL,QAAS;gBAClBG,SAAS,EAAC,8DAA8D;gBAAAC,QAAA,EACzE;YAED,CAAQ,CAAC;SAAA;IAAA,CACH,CAAC;AAEb;;;QApBiBf,mTAAS,CAAC,CAAC;QACZC,0HAAO;;;KAFCM,MAAMA,CAAA,EAAG","ignoreList":[],"debugId":null}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/components/Sidebar.tsx"],"sourcesContent":["// components/Sidebar.tsx\nimport Link from \"next/link\";\n\nexport default function Sidebar() {\n  return (\n    <aside className=\"w-60 border-r bg-white p-4 space-y-2\">\n      <Link className=\"block px-2 py-2 rounded hover:bg-gray-100\" href=\"/dashboard\">Dashboard</Link>\n    </aside>\n  );\n}\n\n"],"names":["Link","jsx","_jsx","Sidebar","className","children","href"],"mappings":"AAAA,yBAAA;;;;;AACA,OAAOA,IAAI,MAAM,WAAW;AAAC,SAAAC,GAAA,IAAAC,IAAA;;;AAEd;IACb,OAAA,WAAA,OACEA,8UAAA,EAAA,SAAA;QAAOE,SAAS,EAAC,sCAAsC;QAAAC,QAAA,EAAA,WAAA,OACrDH,8UAAA,EAACF,2UAAI,EAAA;YAACI,SAAS,EAAC,2CAA2C;YAACE,IAAI,EAAC,YAAY;YAAAD,QAAA,EAAC;QAAS,CAAM;IAAC,CACzF,CAAC;AAEZ;KANwBF,OAAOA,CAAA,EAAG","ignoreList":[],"debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/app/dashboard/components/KPIStat.tsx"],"sourcesContent":["type KPIStatProps = { label: string; value: number | string };\nexport default function KPIStat({ label, value }: KPIStatProps) {\n  return (\n    <div className=\"bg-white rounded-xl p-4 shadow border\">\n      <div className=\"text-sm text-gray-500\">{label}</div>\n      <div className=\"text-2xl font-semibold mt-1\">{value}</div>\n    </div>\n  );\n}\n"],"names":["KPIStat","label","value","_jsxs","className","children","_jsx"],"mappings":";;;;;;AACe,iBAAiB,EAAEC,KAAK,EAAEC,KAAAA,EAAqB,EAAE;IAC9D,OAAA,WAAA,OACEC,+UAAA,EAAA,OAAA;QAAKC,SAAS,EAAC,uCAAuC;QAAAC,QAAA,EAAA;YAAA,WAAA,GACpDC,kVAAA,EAAA,OAAA;gBAAKF,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAEJ;YAAK,CAAM,CAAC;YAAA,WAAA,OACpDK,8UAAA,EAAA,OAAA;gBAAKF,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,EAAEH;YAAK,CAAM,CAAC;SAAA;IAAA,CACvD,CAAC;AAEV;KAPwBF,OAAOA","ignoreList":[],"debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/app/dashboard/components/RevenueChart.tsx"],"sourcesContent":["\"use client\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, LineElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend } from \"chart.js\";\nChartJS.register(LineElement, PointElement, LinearScale, CategoryScale, Tooltip, Legend);\n\nexport default function RevenueChart({ points }: { points: { x: string; y: number }[] }) {\n  const data = {\n    labels: points.map(p => p.x),\n    datasets: [{ label: \"Revenue\", data: points.map(p => p.y) }]\n  };\n  const options = { responsive: true, maintainAspectRatio: false } as const;\n  return <div className=\"h-64 bg-white rounded-xl p-4 shadow border\"><Line data={data} options={options} /></div>;\n}\n"],"names":["Line","Chart","ChartJS","LineElement","PointElement","LinearScale","CategoryScale","Tooltip","Legend","jsx","_jsx","register","RevenueChart","points","data","labels","map","p","x","datasets","label","y","options","responsive","maintainAspectRatio","className","children"],"mappings":";;;;AACA,SAASA,IAAI,QAAQ,iBAAiB;AACtC,SAASC,KAAK,IAAIC,OAAO,EAAEC,WAAW,EAAEC,YAAY,EAAEC,WAAW,EAAEC,aAAa,EAAEC,OAAO,EAAEC,MAAM,QAAQ,UAAU;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAFpH,YAAY;;;;AAGZR,gOAAO,CAACS,QAAQ,CAACR,sOAAW,EAAEC,uOAAY,EAAEC,sOAAW,EAAEC,wOAAa,EAAEC,kOAAO,EAAEC,iOAAM,CAAC;AAEzE,sBAAsB,EAAEK,MAAAA,EAAgD,EAAE;IACvF,MAAMC,IAAI,GAAG;QACXC,MAAM,EAAEF,MAAM,CAACG,GAAG,EAACC,CAAC,GAAIA,CAAC,CAACC,CAAC,CAAC;QAC5BC,QAAQ,EAAE;YAAC;gBAAEC,KAAK,EAAE,SAAS;gBAAEN,IAAI,EAAED,MAAM,CAACG,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACI,CAAC;YAAE,CAAC;SAAA;IAC7D,CAAC;IACD,MAAMC,OAAO,GAAG;QAAEC,UAAU,EAAE,IAAI;QAAEC,mBAAmB,EAAE;IAAM,CAAU;IACzE,OAAA,WAAA,OAAOd,8UAAA,EAAA,OAAA;QAAKe,SAAS,EAAC,4CAA4C;QAAAC,QAAA,EAAA,WAAA,OAAChB,8UAAA,EAACV,oRAAI,EAAA;YAACc,IAAI,EAAEA,IAAK;YAACQ,OAAO,EAAEA;QAAQ,CAAE;IAAC,CAAK,CAAC;AACjH;KAPwBV,YAAYA","ignoreList":[],"debugId":null}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/app/dashboard/components/OrdersTable.tsx"],"sourcesContent":["\"use client\";\nimport type { Order } from \"../../../lib/auth\";\n\nexport default function OrdersTable({ orders }: { orders: Order[] }) {\n  return (\n    <div className=\"bg-white rounded-xl p-4 shadow border overflow-auto\">\n      <table className=\"w-full text-sm\">\n        <thead>\n          <tr className=\"text-left border-b\">\n            <th className=\"py-2\">ID</th>\n            <th>Amount</th>\n            <th>Status</th>\n            <th>Created</th>\n          </tr>\n        </thead>\n        <tbody>\n          {orders.map((o) => {\n            const amountValue = Number.parseFloat(String(o.amount ?? 0));\n            const displayAmount = Number.isFinite(amountValue) ? amountValue.toFixed(2) : \"0.00\";\n\n            return (\n              <tr key={o.id} className=\"border-b last:border-0\">\n                <td className=\"py-2\">{o.id}</td>\n                <td>${displayAmount}</td>\n                <td className={o.status === \"paid\" ? \"text-emerald-600\" : \"text-rose-600\"}>\n                  {o.status}\n                </td>\n                <td>{new Date(o.created_at).toLocaleString()}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":["jsx","_jsx","jsxs","_jsxs","OrdersTable","orders","className","children","map","o","amountValue","Number","parseFloat","String","amount","displayAmount","isFinite","toFixed","id","status","Date","created_at","toLocaleString"],"mappings":";;;;AAAa,SAAAA,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAAb,YAAY;;AAGG,qBAAqB,EAAEE,MAAAA,EAA6B,EAAE;IACnE,OAAA,WAAA,OACEJ,8UAAA,EAAA,OAAA;QAAKK,SAAS,EAAC,qDAAqD;QAAAC,QAAA,EAAA,WAAA,OAClEJ,+UAAA,EAAA,SAAA;YAAOG,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAA;gBAAA,WAAA,OAC/BN,8UAAA,EAAA,SAAA;oBAAAM,QAAA,EAAA,WAAA,OACEJ,+UAAA,EAAA,MAAA;wBAAIG,SAAS,EAAC,oBAAoB;wBAAAC,QAAA,EAAA;4BAAA,WAAA,OAChCN,8UAAA,EAAA,MAAA;gCAAIK,SAAS,EAAC,MAAM;gCAAAC,QAAA,EAAC;4BAAE,CAAI,CAAC;4BAAA,WAAA,GAC5BN,kVAAA,EAAA,MAAA;gCAAAM,QAAA,EAAI;4BAAM,CAAI,CAAC;4BAAA,WAAA,OACfN,8UAAA,EAAA,MAAA;gCAAAM,QAAA,EAAI;4BAAM,CAAI,CAAC;4BAAA,WAAA,OACfN,8UAAA,EAAA,MAAA;gCAAAM,QAAA,EAAI;4BAAO,CAAI,CAAC;yBAAA;oBAAA,CACd;gBAAC,CACA,CAAC;gBAAA,WAAA,OACRN,8UAAA,EAAA,SAAA;oBAAAM,QAAA,EACGF,MAAM,CAACG,GAAG,EAAEC,CAAC,IAAK;wBACjB,MAAMC,WAAW,GAAGC,MAAM,CAACC,UAAU,CAACC,MAAM,CAACJ,CAAC,CAACK,MAAM,IAAI,CAAC,CAAC,CAAC;wBAC5D,MAAMC,aAAa,GAAGJ,MAAM,CAACK,QAAQ,CAACN,WAAW,CAAC,GAAGA,WAAW,CAACO,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;wBAEpF,OAAA,WAAA,OACEd,+UAAA,EAAA,MAAA;4BAAeG,SAAS,EAAC,wBAAwB;4BAAAC,QAAA,EAAA;gCAAA,WAAA,GAC/CN,kVAAA,EAAA,MAAA;oCAAIK,SAAS,EAAC,MAAM;oCAAAC,QAAA,EAAEE,CAAC,CAACS,EAAAA;gCAAE,CAAK,CAAC;gCAAA,WAAA,OAChCf,+UAAA,EAAA,MAAA;oCAAAI,QAAA,EAAA;wCAAI,GAAC;wCAACQ,aAAa;qCAAA;gCAAA,CAAK,CAAC;gCAAA,WAAA,GACzBd,kVAAA,EAAA,MAAA;oCAAIK,SAAS,EAAEG,CAAC,CAACU,MAAM,KAAK,MAAM,GAAG,kBAAkB,GAAG,eAAgB;oCAAAZ,QAAA,EACvEE,CAAC,CAACU,MAAAA;gCAAM,CACP,CAAC;gCAAA,WAAA,OACLlB,8UAAA,EAAA,MAAA;oCAAAM,QAAA,EAAK,IAAIa,IAAI,CAACX,CAAC,CAACY,UAAU,CAAC,CAACC,cAAc,CAAC;gCAAC,CAAK,CAAC;6BAAA;wBAAA,GAN3Cb,CAAC,CAACS,EAOP,CAAC;oBAET,CAAC;gBAAC,CACG,CAAC;aAAA;QAAA,CACH;IAAC,CACL,CAAC;AAEV;KAhCwBd,WAAWA","ignoreList":[],"debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/lib/auth.ts"],"sourcesContent":["import axios from \"axios\";\n\n// axios instance\nexport const api = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://127.0.0.1:8000\",\n  headers: { \"Content-Type\": \"application/json\" },\n});\n\n// ðŸ”‘ Login (JWT Token)\nexport async function login(username: string, password: string) {\n  const { data } = await api.post(\"/api/auth/token/\", { username, password });\n  return data as { access: string; refresh: string };\n}\n\n// ðŸ§¾ Register (optional, for signup)\nexport async function register(username: string, email: string, password: string) {\n  const { data } = await api.post(\"/api/auth/register/\", {\n    username,\n    email,\n    password,\n  });\n  return data;\n}\n\n// ðŸ“Š KPI & Orders Fetching for Dashboard\nexport async function fetchKPIs() {\n  const token = localStorage.getItem(\"access\");\n  const { data } = await api.get(\"/api/analytics/kpis/\", {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return data;\n}\n\nexport interface Order {\n  id: number;\n  customer: string;\n  amount: number | string;\n  status: string;\n  created_at: string;\n}\n\nexport async function fetchOrders() {\n  const token = localStorage.getItem(\"access\");\n  const { data } = await api.get(\"/api/analytics/orders/\", {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  return data;\n}\n"],"names":["axios","api","create","baseURL","process","env","NEXT_PUBLIC_API_URL","headers","login","username","password","data","post","register","email","fetchKPIs","token","localStorage","getItem","get","Authorization","fetchOrders"],"mappings":";;;;;;;;;;;;AAIWI,OAAO,CAACC,GAAG,CAACC,mBAAmB;AAJ1C,OAAON,KAAK,MAAM,OAAO;;AAGlB,MAAMC,GAAG,GAAGD,sMAAK,CAACE,MAAM,CAAC;IAC9BC,OAAO,+DAAqC,uBAAuB;IACnEI,OAAO,EAAE;QAAE,cAAc,EAAE;IAAmB;AAChD,CAAC,CAAC;AAGK,eAAeC,KAAKA,CAACC,QAAgB,EAAEC,QAAgB,EAAE;IAC9D,MAAM,EAAEC,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,kBAAkB,EAAE;QAAEH,QAAQ;QAAEC;IAAS,CAAC,CAAC;IAC3E,OAAOC,IAAI;AACb;AAGO,eAAeE,QAAQA,CAACJ,QAAgB,EAAEK,KAAa,EAAEJ,QAAgB,EAAE;IAChF,MAAM,EAAEC,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,qBAAqB,EAAE;QACrDH,QAAQ;QACRK,KAAK;QACLJ;IACF,CAAC,CAAC;IACF,OAAOC,IAAI;AACb;AAGO,eAAeI,SAASA,CAAA,EAAG;IAChC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC5C,MAAM,EAAEP,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACkB,GAAG,CAAC,sBAAsB,EAAE;QACrDZ,OAAO,EAAE;YAAEa,aAAa,EAAE,CAAA,OAAA,EAAUJ,KAAK,EAAA;QAAG;IAC9C,CAAC,CAAC;IACF,OAAOL,IAAI;AACb;AAUO,eAAeU,WAAWA,CAAA,EAAG;IAClC,MAAML,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC5C,MAAM,EAAEP,IAAAA,EAAM,GAAG,MAAMV,GAAG,CAACkB,GAAG,CAAC,wBAAwB,EAAE;QACvDZ,OAAO,EAAE;YAAEa,aAAa,EAAE,CAAA,OAAA,EAAUJ,KAAK,EAAA;QAAG;IAC9C,CAAC,CAAC;IACF,OAAOL,IAAI;AACb","ignoreList":[],"debugId":null}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///home/kapo/Projects/RevalytIQ/frontend/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useMemo } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport toast from \"react-hot-toast\";\nimport Navbar from \"../../components/Navbar\";\nimport Sidebar from \"../../components/Sidebar\";\nimport KPIStat from \"./components/KPIStat\";\nimport RevenueChart from \"./components/RevenueChart\";\nimport OrdersTable from \"./components/OrdersTable\";\nimport { fetchKPIs, fetchOrders, Order } from \"../../lib/auth\";\nimport { hydrateAuthFromStorage, useAuth } from \"../../lib/store\";\n\nexport default function Dashboard() {\n  const router = useRouter();\n  const queryClient = useQueryClient();\n  const access = useAuth((s) => s.access);\n\n  // ðŸ” Authentication check\n  useEffect(() => {\n    hydrateAuthFromStorage();\n    const token = useAuth.getState().access;\n    if (!token) router.replace(\"/\");\n  }, [router]);\n\n  // ðŸ“Š Fetch KPIs and Orders\n  const kpiQ = useQuery({\n    queryKey: [\"kpis\"],\n    queryFn: fetchKPIs,\n    enabled: !!access,\n  });\n  const ordersQ = useQuery({\n    queryKey: [\"orders\"],\n    queryFn: fetchOrders,\n    enabled: !!access,\n  });\n\n  // ðŸ’° Aggregate revenue over time\n  const revenueSeries = useMemo(() => {\n    const items = (Array.isArray(ordersQ.data)\n      ? ordersQ.data\n      : ordersQ.data?.results) as Order[] | undefined;\n    const buckets = new Map<string, number>();\n    (items ?? []).forEach((o) => {\n      const d = new Date(o.created_at);\n      const key = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, \"0\")}-${String(\n        d.getDate()\n      ).padStart(2, \"0\")}`;\n      buckets.set(key, (buckets.get(key) ?? 0) + o.amount);\n    });\n    return Array.from(buckets.entries()).map(([x, y]) => {\n      const numericY = Number.parseFloat(String(y));\n      return {\n        x,\n        y: Number.isFinite(numericY) ? Number(numericY.toFixed(2)) : 0,\n      };\n    });\n  }, [ordersQ.data]);\n\n  // ðŸ”„ Refresh handler\n  const onRefresh = async () => {\n    await Promise.all([\n      queryClient.invalidateQueries({ queryKey: [\"kpis\"] }),\n      queryClient.invalidateQueries({ queryKey: [\"orders\"] }),\n    ]);\n    toast.success(\"Data refreshed\");\n  };\n\n  // ðŸŒ€ Loading / Error states\n  const anyLoading = kpiQ.isLoading || ordersQ.isLoading;\n  const anyError = kpiQ.isError || ordersQ.isError;\n\n  if (anyLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen text-gray-500\">\n        Loading analytics data...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen grid grid-rows-[auto_1fr] bg-gray-50\">\n      <Navbar />\n      <div className=\"grid grid-cols-[240px_1fr]\">\n        <Sidebar />\n        <main className=\"p-6 space-y-6\">\n          <div className=\"flex items-center justify-between\">\n            <h1 className=\"text-xl font-semibold\">Analytics Overview</h1>\n            <button\n              onClick={onRefresh}\n              className=\"text-sm px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60\"\n              disabled={anyLoading}\n            >\n              {anyLoading ? \"Refreshing...\" : \"Refresh\"}\n            </button>\n          </div>\n\n          {anyError && (\n            <p className=\"text-red-600\">Failed to load data. Please refresh.</p>\n          )}\n\n          <div className=\"grid md:grid-cols-3 gap-4\">\n            <KPIStat\n              label=\"Revenue\"\n              value={kpiQ.data ? `$${kpiQ.data.revenue.toFixed(2)}` : \"...\"}\n            />\n            <KPIStat label=\"Orders\" value={kpiQ.data?.orders ?? \"...\"} />\n            <KPIStat label=\"AOV\" value={kpiQ.data ? `$${kpiQ.data.aov}` : \"...\"} />\n          </div>\n\n          <RevenueChart points={revenueSeries} />\n\n          <div>\n            <h2 className=\"text-lg font-semibold mb-3\">Recent Orders</h2>\n            <OrdersTable\n              orders={\n                (Array.isArray(ordersQ.data)\n                  ? ordersQ.data\n                  : ordersQ.data?.results) ?? []\n              }\n            />\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":["useEffect","useMemo","useRouter","useQuery","useQueryClient","toast","Navbar","Sidebar","KPIStat","RevenueChart","OrdersTable","fetchKPIs","fetchOrders","hydrateAuthFromStorage","useAuth","jsx","_jsx","jsxs","_jsxs","Dashboard","router","queryClient","access","s","token","getState","replace","kpiQ","queryKey","queryFn","enabled","ordersQ","revenueSeries","items","Array","isArray","data","results","buckets","Map","forEach","o","d","Date","created_at","key","getFullYear","String","getMonth","padStart","getDate","set","get","amount","from","entries","map","x","y","numericY","Number","parseFloat","isFinite","toFixed","onRefresh","Promise","all","invalidateQueries","success","anyLoading","isLoading","anyError","isError","className","children","onClick","disabled","label","value","revenue","orders","aov","points"],"mappings":";;;;AACA,SAASA,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAC1C,SAASC,SAAS,QAAQ,iBAAiB;;AAC3C,SAASC,QAAQ,EAAEC,cAAc,QAAQ,uBAAuB;AAChE,OAAOC,KAAK,MAAM,iBAAiB;AACnC,OAAOC,MAAM,MAAM,yBAAyB;AAC5C,OAAOC,OAAO,MAAM,0BAA0B;AAC9C,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,YAAY,MAAM,2BAA2B;AACpD,OAAOC,WAAW,MAAM,0BAA0B;AAClD,SAASC,SAAS,EAAEC,WAAW,QAAe,gBAAgB;AAC9D,SAASC,sBAAsB,EAAEC,OAAO,QAAQ,iBAAiB;AAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;;AAXlE,YAAY;;;;;;;;;;;;;AAaG;;IACb,MAAME,MAAM,0TAAY,CAAC,CAAC;IAC1B,MAAMC,WAAW;IACjB,MAAMC,MAAM;sCAAYC,CAAC,GAAKA,CAAC,CAACD,MAAM,CAAC;;IAEvC,0BAAA;QACAtB,2UAAS;+BAAC,MAAM;YACda,6IAAsB,CAAC,CAAC;YACxB,MAAMW,KAAK,GAAGV,0HAAO,CAACW,QAAQ,CAAC,CAAC,CAACH,MAAM;YACvC,IAAI,CAACE,KAAK,EAAEJ,MAAM,CAACM,OAAO,CAAC,GAAG,CAAC;QACjC,CAAC;8BAAE;QAACN,MAAM;KAAC,CAAC;IAEZ,2BAAA;IACA,MAAMO,IAAI,mSAAY;QACpBC,QAAQ,EAAE;YAAC,MAAM;SAAC;QAClBC,OAAO,EAAElB,2HAAS;QAClBmB,OAAO,EAAE,CAAC,CAACR;IACb,CAAC,CAAC;IACF,MAAMS,OAAO,mSAAY;QACvBH,QAAQ,EAAE;YAAC,QAAQ;SAAC;QACpBC,OAAO,EAAEjB,6HAAW;QACpBkB,OAAO,EAAE,CAAC,CAACR;IACb,CAAC,CAAC;IAEF,iCAAA;IACA,MAAMU,aAAa,OAAG/B,yUAAO;4CAAC,MAAM;YAClC,MAAMgC,KAAK,GAAIC,KAAK,CAACC,OAAO,CAACJ,OAAO,CAACK,IAAI,CAAC,GACtCL,OAAO,CAACK,IAAI,GACZL,OAAO,CAACK,IAAI,EAAEC,OAA+B;YACjD,MAAMC,OAAO,GAAG,IAAIC,GAAG,CAAiB,CAAC;YACzC,CAACN,KAAK,IAAI,EAAE,EAAEO,OAAO;qDAAEC,CAAC,IAAK;oBAC3B,MAAMC,CAAC,GAAG,IAAIC,IAAI,CAACF,CAAC,CAACG,UAAU,CAAC;oBAChC,MAAMC,GAAG,GAAG,GAAGH,CAAC,CAACI,WAAW,CAAC,CAAC,CAAA,CAAA,EAAIC,MAAM,CAACL,CAAC,CAACM,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAA,CAAA,EAAIF,MAAM,CACnFL,CAAC,CAACQ,OAAO,CAAC,CACZ,CAAC,CAACD,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;oBACpBX,OAAO,CAACa,GAAG,CAACN,GAAG,EAAE,CAACP,OAAO,CAACc,GAAG,CAACP,GAAG,CAAC,IAAI,CAAC,IAAIJ,CAAC,CAACY,MAAM,CAAC;gBACtD,CAAC,CAAC;;YACF,OAAOnB,KAAK,CAACoB,IAAI,CAAChB,OAAO,CAACiB,OAAO,CAAC,CAAC,CAAC,CAACC,GAAG;oDAAC,CAAC,CAACC,CAAC,EAAEC,CAAC,CAAC,KAAK;oBACnD,MAAMC,QAAQ,GAAGC,MAAM,CAACC,UAAU,CAACd,MAAM,CAACW,CAAC,CAAC,CAAC;oBAC7C,OAAO;wBACLD,CAAC;wBACDC,CAAC,EAAEE,MAAM,CAACE,QAAQ,CAACH,QAAQ,CAAC,GAAGC,MAAM,CAACD,QAAQ,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG;oBAC/D,CAAC;gBACH,CAAC,CAAC;;QACJ,CAAC;2CAAE;QAAChC,OAAO,CAACK,IAAI;KAAC,CAAC;IAElB,qBAAA;IACA,MAAM4B,SAAS,GAAG,MAAAA,CAAA,KAAY;QAC5B,MAAMC,OAAO,CAACC,GAAG,CAAC;YAChB7C,WAAW,CAAC8C,iBAAiB,CAAC;gBAAEvC,QAAQ,EAAE;oBAAC,MAAM;iBAAA;YAAE,CAAC,CAAC;YACrDP,WAAW,CAAC8C,iBAAiB,CAAC;gBAAEvC,QAAQ,EAAE;oBAAC,QAAQ;iBAAA;YAAE,CAAC,CAAC;SACxD,CAAC;QACFvB,oTAAK,CAAC+D,OAAO,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAED,4BAAA;IACA,MAAMC,UAAU,GAAG1C,IAAI,CAAC2C,SAAS,IAAIvC,OAAO,CAACuC,SAAS;IACtD,MAAMC,QAAQ,GAAG5C,IAAI,CAAC6C,OAAO,IAAIzC,OAAO,CAACyC,OAAO;IAEhD,IAAIH,UAAU,EAAE;QACd,OAAA,WAAA,OACErD,8UAAA,EAAA,OAAA;YAAKyD,SAAS,EAAC,6DAA6D;YAAAC,QAAA,EAAC;QAE7E,CAAK,CAAC;IAEV;IAEA,OAAA,WAAA,OACExD,+UAAA,EAAA,OAAA;QAAKuD,SAAS,EAAC,mDAAmD;QAAAC,QAAA,EAAA;YAAA,WAAA,OAChE1D,8UAAA,EAACV,mIAAM,EAAA,CAAA,CAAE,CAAC;YAAA,WAAA,OACVY,+UAAA,EAAA,OAAA;gBAAKuD,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,EAAA;oBAAA,WAAA,GACzC1D,kVAAA,EAACT,oIAAO,EAAA,CAAA,CAAE,CAAC;oBAAA,WAAA,OACXW,+UAAA,EAAA,QAAA;wBAAMuD,SAAS,EAAC,eAAe;wBAAAC,QAAA,EAAA;4BAAA,WAAA,OAC7BxD,+UAAA,EAAA,OAAA;gCAAKuD,SAAS,EAAC,mCAAmC;gCAAAC,QAAA,EAAA;oCAAA,WAAA,OAChD1D,8UAAA,EAAA,MAAA;wCAAIyD,SAAS,EAAC,uBAAuB;wCAAAC,QAAA,EAAC;oCAAkB,CAAI,CAAC;oCAAA,WAAA,OAC7D1D,8UAAA,EAAA,UAAA;wCACE2D,OAAO,EAAEX,SAAU;wCACnBS,SAAS,EAAC,6FAA6F;wCACvGG,QAAQ,EAAEP,UAAW;wCAAAK,QAAA,EAEpBL,UAAU,GAAG,eAAe,GAAG;oCAAS,CACnC,CAAC;iCAAA;4BAAA,CACN,CAAC;4BAELE,QAAQ,IAAA,WAAA,OACPvD,8UAAA,EAAA,KAAA;gCAAGyD,SAAS,EAAC,cAAc;gCAAAC,QAAA,EAAC;4BAAoC,CAAG,CACpE;4BAAA,WAAA,OAEDxD,+UAAA,EAAA,OAAA;gCAAKuD,SAAS,EAAC,2BAA2B;gCAAAC,QAAA,EAAA;oCAAA,WAAA,OACxC1D,8UAAA,EAACR,wJAAO,EAAA;wCACNqE,KAAK,EAAC,SAAS;wCACfC,KAAK,EAAEnD,IAAI,CAACS,IAAI,GAAG,CAAA,CAAA,EAAIT,IAAI,CAACS,IAAI,CAAC2C,OAAO,CAAChB,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG;oCAAM,CAC/D,CAAC;oCAAA,WAAA,OACF/C,8UAAA,EAACR,wJAAO,EAAA;wCAACqE,KAAK,EAAC,QAAQ;wCAACC,KAAK,EAAEnD,IAAI,CAACS,IAAI,EAAE4C,MAAM,IAAI;oCAAM,CAAE,CAAC;oCAAA,WAAA,OAC7DhE,8UAAA,EAACR,wJAAO,EAAA;wCAACqE,KAAK,EAAC,KAAK;wCAACC,KAAK,EAAEnD,IAAI,CAACS,IAAI,GAAG,CAAA,CAAA,EAAIT,IAAI,CAACS,IAAI,CAAC6C,GAAG,EAAE,GAAG;oCAAM,CAAE,CAAC;iCAAA;4BAAA,CACpE,CAAC;4BAAA,WAAA,OAENjE,8UAAA,EAACP,6JAAY,EAAA;gCAACyE,MAAM,EAAElD;4BAAc,CAAE,CAAC;4BAAA,WAAA,OAEvCd,+UAAA,EAAA,OAAA;gCAAAwD,QAAA,EAAA;oCAAA,WAAA,OACE1D,8UAAA,EAAA,MAAA;wCAAIyD,SAAS,EAAC,4BAA4B;wCAAAC,QAAA,EAAC;oCAAa,CAAI,CAAC;oCAAA,WAAA,OAC7D1D,8UAAA,EAACN,4JAAW,EAAA;wCACVsE,MAAM,EACJ,CAAC9C,KAAK,CAACC,OAAO,CAACJ,OAAO,CAACK,IAAI,CAAC,GACxBL,OAAO,CAACK,IAAI,GACZL,OAAO,CAACK,IAAI,EAAEC,OAAO,KAAK,EAAA;oCAC/B,CACF,CAAC;iCAAA;4BAAA,CACC,CAAC;yBAAA;oBAAA,CACF,CAAC;iBAAA;YAAA,CACJ,CAAC;SAAA;IAAA,CACH,CAAC;AAEV;;;QAhHiBnC;QACKE,2SAAc,CAAC,CAAC;QACrBU,0HAAO;QAUTX,0RAAQ;QAKLA,0RAAQ;;;KAlBFgB,SAASA,CAAA,EAAG","ignoreList":[],"debugId":null}}]
}